<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">

    <title>Dashboard</title>
</head>
<body>
    <header>
        <section class="banner">
            <img src="/annonce.jpg" alt="Les lumières d'Ukraine" (click)="clickAccueil()">
        </section>
    </header>
    <main class="admin-dashboard">
        <h2>Gestion des utilisateurs</h2>
        <input type="text" placeholder="Rechercher un utilisateur" [(ngModel)]="recherche" (input)="rechercheResult()">
    
        <table class="user-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Id</th>
                    <th>Email</th>
                    <th>Adresse</th>
                    <th>Ville</th>
                    <th>Code Postal</th>
                    <th>Téléphone</th>
                    <th>Date d’inscription</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of resultatsFiltres">

                    <td>{{ user.name }}</td>
                    <td>{{user._id}}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.address }}</td>
                    <td>{{ user.city }}</td>
                    <td>{{ user.postalCode }}</td>
                    <td>{{ user.phone }}</td>
                    <td>{{ user.addedAt | date: 'dd/MM/yyyy' }}</td>
                    <td>
                        <button class="delete-btn" (click)="deleteUser(user._id)">Supprimer</button>
                        <button class="update-inactive" *ngIf="user.isActive == true" (click)="updateActiveStatus(user._id)">Rendre Inactif</button>
                        <button class="update-active" *ngIf="user.isActive == false" (click)="updateActiveStatus(user._id)">Rendre Actif</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <h2>Gestion des livres</h2>
        <input type="text" placeholder="Rechercher un livre" [(ngModel)]="rechercheBook" (input)="rechercheResultBook()">
        <table class="user-table">
            <thead>
                <tr>
                    <th>Titre</th>
                    <th>Id</th>
                    <th>Description</th>
                    <th>Genre</th>
                    <th>Etat</th>
                    <th>Appartient à:</th>
                    <th>Posté le:</th>
                    <th>Status:</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let book of resultatBook">
        
                    <td>{{ book.title }}</td>
                    <td>{{book._id}}</td>
                    <td>{{ book.description }}</td>
                    <td>{{ book.genre }}</td>
                    <td>{{book.state }}</td>
                    <td>{{book.owner}}</td>
                    <td>{{book.addedAt | date: 'dd/MM/yyyy' }}</td>
                    <td>{{book.isActive}}</td>
                    <td>
                        <button class="update-inactive" *ngIf="book.isActive == true" (click)="deleteBook(book._id)">Supprimer</button>
                        <button class="update-active" *ngIf="book.isActive == false" (click)="updateActiveStatusBook(book._id)">Rendre Actif</button>      
                    </td>
                </tr>
            </tbody>
        </table>

        <h2>Gestion des évènements</h2>
        <input type="text" placeholder="Rechercher un évènement" [(ngModel)]="rechercheEvent" (input)="rechercheResultEvent()">
        <table class="user-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Id</th>
                    <th>Langage</th>
                    <th>Début</th>
                    <th>Fin</th>
                    <th>Posté le:</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let event of  resultatEvent">
        
                    <td>{{ event.title }}</td>
                    <td>{{event._id}}</td>
                    <td>{{ event.language }}</td>
                    <td>{{ event.eventStartDate }}</td>
                    <td>{{ event.eventEndDate }}</td>
                    <td>{{ event.addedAt | date: 'dd/MM/yyyy' }}</td>
                    <td>
                        <button class="delete-btn" (click)="deleteEvent(event._id)">Supprimer</button>
                        
                    </td>
                </tr>
            </tbody>
        </table>

    </main>
    
</body>
